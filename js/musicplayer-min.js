!function(a,b,c,d){var e="ontouchstart"in b,f=e?"touchstart":"mousedown",g=e?"touchmove":"mousemove",i=e?"touchcancel":"mouseup";secondsToTime=function(a){var b=Math.floor(a/3600),c=Math.floor(a%3600/60),d=Math.ceil(a%3600%60);return(0==b?"":b>0&&b.toString().length<2?"0"+b+":":b+":")+(c.toString().length<2?"0"+c:c)+":"+(d.toString().length<2?"0"+d:d)},a.fn.musicPlayer=function(b){function I(d){var e=d.children("a:first-child").attr("href"),h=d.text(),j=d.attr("data-cover"),k=d.attr("data-artist");a(".mp-player .mp-title").text(h),a(".mp-player .mp-artist").text(k),a(".mp-player .mp-cover").css("background-image","url("+j+")"),c=new Audio(e),c.load(),c.addEventListener("loadeddata",function(){z.html(secondsToTime(c.duration)),C.find("div").width(100*c.volume+"%"),E=c.volume},!1),c.addEventListener("progress",function(){x.width(c.buffered.end(0)/c.duration*100+"%")}),c.addEventListener("timeupdate",function(){y.text(secondsToTime(c.currentTime)),w.width(c.currentTime/c.duration*100+"%")}),c.addEventListener("volumechange",function(){C.find("div").width(100*c.volume+"%"),c.volume>0&&playerElem.hasClass(F.mute)&&playerElem.removeClass(F.mute),c.volume<=0&&!playerElem.hasClass(F.mute)&&playerElem.addClass(F.mute),D=c.volume}),c.addEventListener("ended",function(){b.autoPlay?L():(playerElem.removeClass(F.playing),a(".mp-play").removeClass("hidden"),a(".mp-pause").removeClass("visible"))}),B.on("click",function(){return playerElem.hasClass(F.mute)?(playerElem.removeClass(F.mute),c.volume=E):(playerElem.addClass(F.mute),E=c.volume,c.volume=0),!1}),C.on(f,function(a){adjustVolume(a),C.on(g,function(a){adjustVolume(a)})}).on(i,function(){C.unbind(g),b.volumeChanged()}),v.on(f,function(a){adjustCurrentTime(a),v.on(g,function(a){adjustCurrentTime(a)})}).on(i,function(){v.unbind(g),b.progressChanged()}),a(".mp-playlist li").removeClass("active"),d.addClass("active"),b.onLoad(),b.autoPlay&&J()}function J(){c.play(),playerElem.addClass(F.playing),"-1"!=a.inArray("controls",b.elements)&&"-1"!=a.inArray("play",b.controlElements)&&(a(".mp-play").addClass("hidden"),a(".mp-pause").addClass("visible")),b.onPlay()}function K(){c.pause(),"-1"!=a.inArray("controls",b.elements)&&"-1"!=a.inArray("play",b.controlElements)&&(a(".mp-play").removeClass("hidden"),a(".mp-pause").removeClass("visible"))}function L(){K();var c=a(".mp-playlist li.active").next();0==c.length&&b.loop?(c=a(".mp-playlist li:first-child"),M(c),J()):0==!c.length&&(M(c),J())}function M(a){D=c.volume,I(a),c.volume=D,C.find("div").width(100*D+"%"),w.width(0),x.width(0),y.text(secondsToTime(0))}var c,b=a.extend({autoPlay:!1,volume:80,loop:!1,timeSeparator:" / ",infoElements:["title","artist"],elements:["artwork","information","controls","progress","time","volume"],timeElements:["current","duration"],controlElements:["backward","play","forward","stop"],onLoad:function(){},onPlay:function(){},onPause:function(){},onStop:function(){},onFwd:function(){},onRew:function(){},volumeChanged:function(){},progressChanged:function(){},trackClicked:function(){}},b),j=(a(".mp-progressbar"),a(".mp-volume"),""),k="",l="",m="",n="",o="",p="",q="",r="",s="";for(var t in b.elements)if("volume"==b.elements[t])o="<div class='mp-volume' ><div class='mp-volume-btn' title='Volume'></div><div class=' mp-volume-adjust'><div><div></div></div></div></div>",n+=o;else if("progress"==b.elements[t])p="<div class='mp-progressbar'><div class='mp-bar-loaded' ></div><div class='mp-bar-played'></div></div>",n+=p;else if("artwork"==b.elements[t])q="<div class='mp-cover'></div>",n+=q;else if("information"==b.elements[t]){"-1"!=a.inArray("title",b.infoElements)?titleElem="<div class='mp-title'></div>":titleElem=" ","-1"!=a.inArray("artist",b.infoElements)?artistElem="<div class='mp-artist'></div>":artistElem=" ";for(var u in b.infoElements)"title"==b.infoElements[u]?m+=titleElem:"artist"==b.infoElements[u]&&(m+=artistElem);l="<div class='mp-info' >"+m+"</div>",n+=l}else if("time"==b.elements[t]){"-1"!=a.inArray("current",b.timeElements)?curTimeElem="<div class='mp-time-current'></div>":curTimeElem=" ","-1"!=a.inArray("duration",b.timeElements)?durTimeElem="<div class='mp-time-duration'></div>":durTimeElem=" ",A="<div class='mp-time-separator'>"+b.timeSeparator.replace(/\s/g,"&nbsp;")+"</div>";for(var u in b.timeElements)1==u&&(k+=A),"current"==b.timeElements[u]?k+=curTimeElem:"duration"==b.timeElements[u]&&(k+=durTimeElem);r="<div class='mp-timeHolder'>"+k+"</div>",n+=r}else if("controls"==b.elements[t]){"-1"!=a.inArray("backward",b.controlElements)?backwardElem="<div class='mp-rew'></div>":backwardElem=" ","-1"!=a.inArray("forward",b.controlElements)?forwardElem="<div class='mp-fwd'></div>":forwardElem=" ","-1"!=a.inArray("stop",b.controlElements)?stopElem="<div class='mp-stop'></div>":stopElem=" ","-1"!=a.inArray("play",b.controlElements)?playElem="<div class='mp-play'></div><div class='mp-pause'></div>":playElem=" ";for(var u in b.controlElements)"backward"==b.controlElements[u]?j+=backwardElem:"play"==b.controlElements[u]?j+=playElem:"forward"==b.controlElements[u]?j+=forwardElem:"stop"==b.controlElements[u]&&(j+=stopElem);s="<div class='mp-controls'>"+j+"</div>",n+=s}playerElem=a("<div class='mp-player'>"+n+"</div>"),a(playerElem).insertBefore(".mp-playlist");var v=playerElem.find(".mp-progressbar"),w=playerElem.find(".mp-bar-played"),x=playerElem.find(".mp-bar-loaded"),y=playerElem.find(".mp-time-current"),z=playerElem.find(".mp-time-duration"),A=b.timeSeparator,B=playerElem.find(".mp-volume-btn"),C=playerElem.find(".mp-volume-adjust > div"),D=b.volume/100,E=0,F={playing:"mp-playing",mute:"mp-mute"};/iPad|iPhone|iPod/.test(navigator.userAgent)&&a(".mp-volume").hide(),I(a(".mp-playlist li:first-child")),c.volume=D,adjustCurrentTime=function(a){theRealEvent=e?a.originalEvent.touches[0]:a,c.currentTime=Math.round(c.duration*(theRealEvent.pageX-v.offset().left)/v.width())},adjustVolume=function(a){theRealEvent=e?a.originalEvent.touches[0]:a,c.volume=Math.abs((theRealEvent.pageX-C.offset().left)/C.width())};var G=c.volume,H=c.volume=.111;return Math.round(1e3*c.volume)/1e3==H?c.volume=G:playerElem.addClass("novolume"),z.html("&hellip;"),y.text(secondsToTime(0)),a(".mp-play").click(function(a){a.preventDefault(),J()}),a(".mp-pause").click(function(a){a.preventDefault(),K(),b.onPause()}),a(".mp-fwd").click(function(c){c.preventDefault(),K();var d=a(".mp-playlist li.active").next();0==d.length&&(d=a(".mp-playlist li:first-child")),M(d),J(),b.onFwd()}),a(".mp-rew").click(function(c){c.preventDefault(),K();var d=a(".mp-playlist li.active").prev();0==d.length&&(d=a(".mp-playlist li:last-child")),M(d),J(),b.onRew()}),a(".mp-stop").click(function(c){c.preventDefault(),K();var d=a(".mp-playlist li.active");M(d),b.onStop()}),a(".mp-playlist li").click(function(c){c.preventDefault(),K(),M(a(this)),J(),b.trackClicked()}),this}}(jQuery,window,document);